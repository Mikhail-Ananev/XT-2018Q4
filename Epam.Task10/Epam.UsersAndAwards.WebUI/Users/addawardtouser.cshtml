@using Epam.UsersAndAwards.Logic
@using Epam.UsersAndAwards.Entities

@{
    string strId = Request["id"];
    var userAwardsLogic = new UserAwardsLogic();
    var awardLogic = new AwardLogic();

    if (strId == "0")
    {
        Response.SetStatus(HttpStatusCode.NotFound);
        return;

    }

    if (Request["awardid"] != null)
    {
        string awardId = Request["awardid"];

        if (!userAwardsLogic.Add(int.Parse(awardId), int.Parse(strId)))
        {
            Response.SetStatus(HttpStatusCode.BadRequest);
            return;
        }

        Response.Redirect("/Account");
        return;
    }

    int id;
    if (!int.TryParse(strId, out id))
    {
        Response.SetStatus(HttpStatusCode.BadRequest);
        return;
    }

    var awards = awardLogic.GetAll();
}

<ul id="awardList">
    @foreach (var award in awards)
    {
    <li data-id="@award.Id">
        <a href="~/Users/addawardtouser?awardid=@award.Id&id=@id">
            <img src="~/ViewImage?id=@award.ImageId" alt=@award.Title class="img-rounded img-responsive" width="50" height="50">
        </a>
    </li>
    }
</ul>


